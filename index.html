<html>
  <script>
    if ('WebSocket' in window){
      /* WebSocket is supported. You can proceed with your code*/
      alert("ACTIVE")
    } else {
      /*WebSockets are not supported. Try a fallback method like long-polling etc*/
      alert("INACTIVE")
    }

    var connection = new WebSocket('ws://'+ location.host + '/socketz');
    
    // alert(connection.readyState)

    connection.onopen = function(){
      /*Send a small message to the console once the connection is established */
      var message = {
        'name': 'bill murray',
        'comment': 'No one will ever believe you'
      };

      connection.send(JSON.stringify(message));
      alert('Connection open!');
      }

    connection.onclose = function(){
      alert('Connection closed');
      }

    connection.onerror = function(error){
      alert('Error detected: ' + error);
    }

    connection.onmessage = function(e){
      var server_message = e.data;
      alert('Server says: ' + server_message);
      }
  </script>
</html>

<body>
  <h1> Hello Rackies! </h1>
</body>